

Test 1: - 

Due to wires soldered for waveform may be the reason, that enumeration failed. Dmesg log taken for "echo 1 > ..."
is as below.


ho 1 > /sys/devices/platform/161c0000.pcie/pcie_sysfs                         <
console:/data # dmesg |
>  ^C
130|console:/data # dmesg | grep pci
[  526.442012] exynos-v920-pcie 161c0000.pcie: PCIe Link up go
[  526.542056] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_poweron] start of poweron, pcie state: 0
[  526.542073] exynos-v920-pcie 161c0000.pcie: pcie clk enable, ret value = 0
[  526.542139] exynos-v920-pcie 161c0000.pcie: phy clk enable, ret value = 0
[  526.542149] exynos-v920-pcie 161c0000.pcie: linkA: 5 and linkB: 5
[  526.542424] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to HIGH, gpio val = 1
[  526.542460] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC BAR0 = 0x0
[  526.542466] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC BAR0 = 0x0
[  526.542474] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC Expansion ROM = 0x0
[  526.542480] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC Expansion ROM = 0x0
[  526.542494] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] EQ-Off(0x12001) 0x12001
[  526.542503] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Ch:2  bif, 1lane.
[  526.542511] exynos-v920-pcie 161c0000.pcie: PCIE_PORT_LINK_CTRL  10120
[  526.542520] exynos-v920-pcie 161c0000.pcie: D state: 0, 20000000
[  527.121996] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Link is not up, try count: 1, 4
[  527.122023] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to LOW, gpio val = 0
[  527.122030] exynos-v920-pcie 161c0000.pcie: phy clk enable, ret value = 0
[  527.122037] exynos-v920-pcie 161c0000.pcie: linkA: 5 and linkB: 5
[  527.122309] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to HIGH, gpio val = 1
[  527.122339] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC BAR0 = 0x0
[  527.122345] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC BAR0 = 0x0
[  527.122353] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC Expansion ROM = 0x0
[  527.122358] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC Expansion ROM = 0x0
[  527.122373] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] EQ-Off(0x12001) 0x12001
[  527.122381] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Ch:2  bif, 1lane.
[  527.122389] exynos-v920-pcie 161c0000.pcie: PCIE_PORT_LINK_CTRL  10120
[  527.122398] exynos-v920-pcie 161c0000.pcie: D state: 0, 20000000
[  527.703336] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Link is not up, try count: 2, 4
[  527.703369] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to LOW, gpio val = 0
[  527.703375] exynos-v920-pcie 161c0000.pcie: phy clk enable, ret value = 0
[  527.703383] exynos-v920-pcie 161c0000.pcie: linkA: 5 and linkB: 5
[  527.703654] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to HIGH, gpio val = 1
[  527.703684] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC BAR0 = 0x0
[  527.703689] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC BAR0 = 0x0
[  527.703696] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC Expansion ROM = 0x0
[  527.703701] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC Expansion ROM = 0x0
[  527.703715] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] EQ-Off(0x12001) 0x12001
[  527.703723] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Ch:2  bif, 1lane.
[  527.703730] exynos-v920-pcie 161c0000.pcie: PCIE_PORT_LINK_CTRL  10120
[  527.703738] exynos-v920-pcie 161c0000.pcie: D state: 0, 20000000
[  528.285559] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Link is not up, try count: 3, 4
[  528.285585] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to LOW, gpio val = 0
[  528.285591] exynos-v920-pcie 161c0000.pcie: phy clk enable, ret value = 0
[  528.285599] exynos-v920-pcie 161c0000.pcie: linkA: 5 and linkB: 5
[  528.285873] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to HIGH, gpio val = 1
[  528.285901] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC BAR0 = 0x0
[  528.285907] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC BAR0 = 0x0
[  528.285914] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC Expansion ROM = 0x0
[  528.285919] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC Expansion ROM = 0x0
[  528.285934] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] EQ-Off(0x12001) 0x12001
[  528.285941] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Ch:2  bif, 1lane.
[  528.285948] exynos-v920-pcie 161c0000.pcie: PCIE_PORT_LINK_CTRL  10120
[  528.285957] exynos-v920-pcie 161c0000.pcie: D state: 0, 20000000
[  528.867652] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Link is not up, try count: 4, 4
[  528.867683] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to LOW, gpio val = 0
[  528.867691] exynos-v920-pcie 161c0000.pcie: phy clk enable, ret value = 0
[  528.867700] exynos-v920-pcie 161c0000.pcie: linkA: 5 and linkB: 5
[  528.867972] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to HIGH, gpio val = 1
[  528.868027] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC BAR0 = 0x0
[  528.868035] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC BAR0 = 0x0
[  528.868043] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC Expansion ROM = 0x0
[  528.868048] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC Expansion ROM = 0x0
[  528.868063] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] EQ-Off(0x12001) 0x12001
[  528.868071] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Ch:2  bif, 1lane.
[  528.868078] exynos-v920-pcie 161c0000.pcie: PCIE_PORT_LINK_CTRL  10120
[  528.868086] exynos-v920-pcie 161c0000.pcie: D state: 0, 20000000
[  529.449688] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Link is not up, try count: 5, 4
[  529.449715] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to LOW, gpio val = 0
[  529.449720] exynos-v920-pcie 161c0000.pcie: phy clk enable, ret value = 0
[  529.449729] exynos-v920-pcie 161c0000.pcie: linkA: 5 and linkB: 5
[  529.450000] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to HIGH, gpio val = 1
[  529.450029] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC BAR0 = 0x0
[  529.450034] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC BAR0 = 0x0
[  529.450041] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC Expansion ROM = 0x0
[  529.450047] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC Expansion ROM = 0x0
[  529.450061] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] EQ-Off(0x12001) 0x12001
[  529.450069] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Ch:2  bif, 1lane.
[  529.450076] exynos-v920-pcie 161c0000.pcie: PCIE_PORT_LINK_CTRL  10120
[  529.450084] exynos-v920-pcie 161c0000.pcie: D state: 0, 20000000
[  530.031717] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Link is not up, try count: 6, 4
[  530.031738] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to LOW, gpio val = 0
[  530.031744] exynos-v920-pcie 161c0000.pcie: phy clk enable, ret value = 0
[  530.031752] exynos-v920-pcie 161c0000.pcie: linkA: 5 and linkB: 5
[  530.032042] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to HIGH, gpio val = 1
[  530.032072] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC BAR0 = 0x0
[  530.032078] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC BAR0 = 0x0
[  530.032087] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC Expansion ROM = 0x0
[  530.032094] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC Expansion ROM = 0x0
[  530.032108] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] EQ-Off(0x12001) 0x12001
[  530.032117] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Ch:2  bif, 1lane.
[  530.032125] exynos-v920-pcie 161c0000.pcie: PCIE_PORT_LINK_CTRL  10120
[  530.032134] exynos-v920-pcie 161c0000.pcie: D state: 0, 20000000
[  530.613739] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Link is not up, try count: 7, 4
[  530.613768] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to LOW, gpio val = 0
[  530.613774] exynos-v920-pcie 161c0000.pcie: phy clk enable, ret value = 0
[  530.613783] exynos-v920-pcie 161c0000.pcie: linkA: 5 and linkB: 5
[  530.614054] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to HIGH, gpio val = 1
[  530.614083] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC BAR0 = 0x0
[  530.614088] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC BAR0 = 0x0
[  530.614095] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC Expansion ROM = 0x0
[  530.614100] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC Expansion ROM = 0x0
[  530.614115] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] EQ-Off(0x12001) 0x12001
[  530.614122] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Ch:2  bif, 1lane.
[  530.614129] exynos-v920-pcie 161c0000.pcie: PCIE_PORT_LINK_CTRL  10120
[  530.614137] exynos-v920-pcie 161c0000.pcie: D state: 0, 20000000
[  531.195890] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Link is not up, try count: 8, 4
[  531.195916] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to LOW, gpio val = 0
[  531.195921] exynos-v920-pcie 161c0000.pcie: phy clk enable, ret value = 0
[  531.195929] exynos-v920-pcie 161c0000.pcie: linkA: 5 and linkB: 5
[  531.196200] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to HIGH, gpio val = 1
[  531.196231] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC BAR0 = 0x0
[  531.196237] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC BAR0 = 0x0
[  531.196244] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC Expansion ROM = 0x0
[  531.196249] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC Expansion ROM = 0x0
[  531.196264] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] EQ-Off(0x12001) 0x12001
[  531.196271] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Ch:2  bif, 1lane.
[  531.196279] exynos-v920-pcie 161c0000.pcie: PCIE_PORT_LINK_CTRL  10120
[  531.196287] exynos-v920-pcie 161c0000.pcie: D state: 0, 20000000
[  531.778108] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Link is not up, try count: 9, 4
[  531.778136] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to LOW, gpio val = 0
[  531.778143] exynos-v920-pcie 161c0000.pcie: phy clk enable, ret value = 0
[  531.778151] exynos-v920-pcie 161c0000.pcie: linkA: 5 and linkB: 5
[  531.778422] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Set PERST to HIGH, gpio val = 1
[  531.778451] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC BAR0 = 0x0
[  531.778456] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC BAR0 = 0x0
[  531.778464] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Before RC Expansion ROM = 0x0
[  531.778469] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] After RC Expansion ROM = 0x0
[  531.778483] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] EQ-Off(0x12001) 0x12001
[  531.778490] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_setup_rc] Ch:2  bif, 1lane.
[  531.778498] exynos-v920-pcie 161c0000.pcie: PCIE_PORT_LINK_CTRL  10120
[  531.778506] exynos-v920-pcie 161c0000.pcie: D state: 0, 20000000
[  532.359722] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_establish_link] Link is not up, try count: 10, 4
[  532.359746] exynos-v920-pcie 161c0000.pcie: pcie link up fail
[  532.359753] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_poweroff] start of poweroff, pcie state: 3
[  532.359762] exynos-v920-pcie 161c0000.pcie: exynos_v920_pcie_send_pme_turn_off: link state:4
[  532.359769] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_send_pme_turn_off] pcie link is not up
[  532.369795] exynos-v920-pcie 161c0000.pcie: exynos_v920_pcie_poweroff: Set PERST to LOW, gpio val = 0
[  532.369895] exynos-v920-pcie 161c0000.pcie: [exynos_v920_pcie_poweroff] end of poweroff, pcie state: 0